
<div class="oracle-modern-container">
	<div *ngIf="authService.isSessionValid(); else sessionInvalid">
		<div class="action-bar">
			<div class="page-title">
				<h2>Mis Vacaciones</h2>
				<p class="subtitle">Listado de solicitudes</p>
			</div>

			<div class="action-buttons">
				<button mat-raised-button color="primary" class="oracle-btn primary-btn" (click)="solicitarVacacion()">
					<mat-icon>add</mat-icon>
					Solicitar Vacaci√≥n
				</button>
			</div>
		</div>

	<div *ngIf="loading" class="loading-state">
		<mat-spinner diameter="48"></mat-spinner>
		<p>Cargando solicitudes...</p>
	</div>

	<div *ngIf="error" class="error-message">
		<div class="error-icon">‚ö†</div>
		<h3>Error</h3>
		<p>{{ error }}</p>
	</div>

	<div *ngIf="!loading && (!vacaciones || vacaciones.length === 0)" class="empty-state">
		<div class="empty-icon">üì≠</div>
		<h3>No tiene solicitudes de vacaciones</h3>
		<p>Cuando env√≠e una solicitud aparecer√° aqu√≠.</p>
	</div>

	<mat-card class="data-table-card" *ngIf="vacaciones && vacaciones.length > 0">
		<div class="table-container">
			<table mat-table [dataSource]="vacaciones" class="mat-elevation-z1 oracle-table">

				<ng-container matColumnDef="fechaInicio">
					<th mat-header-cell *matHeaderCellDef>Fecha inicio</th>
					<td mat-cell *matCellDef="let v">{{ v.fechaInicio | date:'shortDate' }}</td>
				</ng-container>

				<ng-container matColumnDef="fechaFin">
					<th mat-header-cell *matHeaderCellDef>Fecha fin</th>
					<td mat-cell *matCellDef="let v">{{ v.fechaFin | date:'shortDate' }}</td>
				</ng-container>

				<ng-container matColumnDef="dias">
					<th mat-header-cell *matHeaderCellDef>D√≠as</th>
					<td mat-cell *matCellDef="let v">{{ v.dias }}</td>
				</ng-container>

				<ng-container matColumnDef="estado">
					<th mat-header-cell *matHeaderCellDef>Estado</th>
					<td mat-cell *matCellDef="let v">{{ v.estado }}</td>
				</ng-container>

				<ng-container matColumnDef="motivo">
					<th mat-header-cell *matHeaderCellDef>Motivo</th>
					<td mat-cell *matCellDef="let v">{{ v.motivo }}</td>
				</ng-container>

				<ng-container matColumnDef="acciones">
					<th mat-header-cell *matHeaderCellDef>Acciones</th>
					<td mat-cell *matCellDef="let v">
						<div class="action-buttons">
							<button mat-icon-button color="warn" (click)="cancelarSolicitud(v)" [disabled]="!puedeCancelar(v)">
								<mat-icon>delete</mat-icon>
							</button>
						</div>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>
		</div>
	</mat-card>
	</div>

	<ng-template #sessionInvalid>
		<div class="error-message">
			<div class="error-icon">üîí</div>
			<h3>Sesi√≥n incompleta</h3>
			<p>No se pudo validar su sesi√≥n correctamente. Por favor, cierre sesi√≥n y vuelva a ingresar.</p>
			<div style="margin-top:12px;">
				<button mat-button color="primary" (click)="router.navigate(['/login'])">Ir al login</button>
			</div>
		</div>
	</ng-template>

</div>
